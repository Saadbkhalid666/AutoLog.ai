<div class="max-w-4xl mx-auto p-6 text-white">
  <h2 class="text-2xl font-bold mb-4">Service Reminders</h2>

  <!-- Add Reminder Form -->
  <div class="bg-white/10 p-5 rounded-2xl mb-6 shadow-md">
    <h3 class="text-lg font-semibold mb-3">Add New Reminder</h3>
    <div class="grid md:grid-cols-3 gap-4">
      <input [(ngModel)]="newReminder.service_type" type="text" placeholder="Service Type"
        class="p-2 rounded-lg bg-transparent border border-white/20 focus:outline-none focus:border-lime-400">
      <input [(ngModel)]="newReminder.due_date" type="date"
        class="p-2 rounded-lg bg-transparent border border-white/20 focus:outline-none focus:border-lime-400">
      <input [(ngModel)]="newReminder.note" type="text" placeholder="Note"
        class="p-2 rounded-lg bg-transparent border border-white/20 focus:outline-none focus:border-lime-400">
    </div>
    <button (click)="addReminder()" class="mt-4 bg-lime-500 hover:bg-lime-600 text-black font-semibold py-2 px-4 rounded-lg">
      Add Reminder
    </button>
    <p *ngIf="errorMsg" class="text-red-400 mt-2">{{ errorMsg }}</p>
  </div>

  <!-- Loading -->
  <div *ngIf="loading" class="text-gray-300 text-center">Loading reminders...</div>

  <!-- Reminders Table -->
  <div *ngIf="!loading && reminders.length > 0" class="overflow-x-auto">
    <table class="w-full border border-white/10 text-sm">
      <thead class="bg-white/5">
        <tr>
          <th class="p-3 text-left">Service Type</th>
          <th class="p-3 text-left">Due Date</th>
          <th class="p-3 text-left">Note</th>
          <th class="p-3 text-left">Status</th>
          <th class="p-3 text-left">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let reminder of reminders" class="border-t border-white/10">
  <td class="p-3">
    <input 
      *ngIf="editingReminder && editingReminder.id === reminder.id"
      [(ngModel)]="editingReminder.service_type"
      class="bg-transparent border border-white/20 p-1 rounded" />
    <span *ngIf="!editingReminder || editingReminder.id !== reminder.id">
      {{ reminder.service_type }}
    </span>
  </td>

  <td class="p-3">
    <input 
      *ngIf="editingReminder && editingReminder.id === reminder.id"
      [(ngModel)]="editingReminder.due_date" 
      type="date"
      class="bg-transparent border border-white/20 p-1 rounded" />
    <span *ngIf="!editingReminder || editingReminder.id !== reminder.id">
      {{ reminder.due_date }}
    </span>
  </td>

  <td class="p-3">
    <input 
      *ngIf="editingReminder && editingReminder.id === reminder.id"
      [(ngModel)]="editingReminder.note"
      class="bg-transparent border border-white/20 p-1 rounded" />
    <span *ngIf="!editingReminder || editingReminder.id !== reminder.id">
      {{ reminder.note }}
    </span>
  </td>

  <td class="p-3">{{ reminder.status }}</td>
  <td class="p-3 flex gap-2">
    <button *ngIf="!editingReminder || editingReminder.id !== reminder.id"
            (click)="editReminder(reminder)"
            class="text-blue-400 hover:underline">Edit</button>

    <button *ngIf="editingReminder && editingReminder.id === reminder.id"
            (click)="updateReminder()"
            class="text-green-400 hover:underline">Save</button>

    <button *ngIf="editingReminder && editingReminder.id === reminder.id"
            (click)="cancelEdit()"
            class="text-gray-400 hover:underline">Cancel</button>

    <button (click)="deleteReminder(reminder.id!)"
            class="text-red-400 hover:underline">Delete</button>
  </td>
</tr>

      </tbody>
    </table>
  </div>

  <p *ngIf="!loading && reminders.length === 0" class="text-center text-gray-400 mt-4">No reminders found ðŸ˜¢</p>
</div>
